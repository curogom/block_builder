# Flutter × Flame 블록 쌓기 게임 개발 작업 문서

## 📋 프로젝트 현황 분석

### 현재 상태
- **기본 Flutter 템플릿**: 현재 프로젝트는 Flutter 기본 카운터 앱 템플릿 상태
- **Flame 엔진 미설치**: 게임 개발에 필요한 Flame 엔진 및 관련 패키지 없음
- **프로젝트 구조**: 기본 Flutter 프로젝트 구조만 존재 (lib/, web/, test/)
- **에셋 미준비**: 게임에 필요한 이미지, 사운드 등 에셋 폴더 없음

## 🎯 개발 목표
README.md 기준으로 Web 우선 스택 게임 구현
- 원탭 물리 퍼즐 게임
- 3분 제한 시간 내 최대 높이 달성
- 저장/네트워크 기능 없는 스탠드얼론 웹 게임

## 📊 개발 공수 평가

### 총 예상 개발 시간: **40-50시간** (주니어 기준)

#### Phase 1: 환경 설정 및 기초 구조 (8시간)
- **Flame 엔진 통합** (2시간)
  - pubspec.yaml 의존성 추가 (flame, flame_audio)
  - 상태관리 패키지 추가 (riverpod 또는 provider)
- **프로젝트 구조 설정** (3시간)
  - 게임 디렉토리 구조 생성
  - 기본 클래스 스캐폴딩
  - 에셋 폴더 구조 설정
- **기본 게임 루프 구현** (3시간)
  - FlameGame 클래스 설정
  - 게임 상태 관리 시스템
  - 화면 전환 로직

#### Phase 2: 핵심 게임플레이 (16시간)
- **블록 시스템** (6시간)
  - Block 컴포넌트 구현
  - 좌우 이동 로직
  - 낙하 물리 구현
- **충돌 및 트리밍** (6시간) ⭐ 난이도: 높음
  - AABB 충돌 감지
  - 겹침 영역 계산 알고리즘
  - 블록 트리밍 로직
  - 파편 효과 구현
- **스택 관리** (4시간)
  - StackManager 구현
  - 높이 계산 시스템
  - 블록 리스트 관리

#### Phase 3: 게임 메카닉 (8시간)
- **점수 시스템** (3시간)
  - 높이 점수 계산
  - 정밀 보너스 시스템
  - 콤보 메카닉
- **난이도 조절** (2시간)
  - 속도 증가 로직
  - 랜덤 오프셋 이벤트
- **타이머 시스템** (3시간)
  - 3분 카운트다운
  - 30초 경고 시스템
  - 게임오버 처리

#### Phase 4: UI/UX (8시간)
- **게임 UI** (4시간)
  - HUD 오버레이 (점수, 타이머)
  - 메인 메뉴
  - 게임오버 화면
  - 일시정지 화면
- **카메라 시스템** (2시간)
  - Y축 따라가기
  - 부드러운 카메라 이동
- **입력 처리** (2시간)
  - 탭 감지 및 처리
  - 반응성 개선

#### Phase 5: 폴리싱 (10시간)
- **비주얼 효과** (4시간)
  - 파티클 시스템
  - 블록 그라디언트
  - 패럴랙스 배경
  - 화면 전환 애니메이션
- **오디오** (3시간)
  - 사운드 효과 통합
  - 배경음악
  - 피드백 사운드
- **웹 최적화** (3시간)
  - 성능 최적화
  - 로딩 화면
  - 반응형 레이아웃

## 🔥 난이도 평가

### 전체 난이도: **중상 (7/10)**

#### 난이도 높은 부분
1. **트리밍 알고리즘** (9/10)
   - 정확한 겹침 영역 계산
   - 실시간 블록 재조정
   - 파편 물리 처리

2. **카메라 동적 제어** (7/10)
   - 부드러운 추적
   - 게임플레이 방해 없는 이동

3. **성능 최적화** (7/10)
   - 웹 환경 최적화
   - 많은 블록 처리 시 성능 유지

#### 난이도 보통 부분
- 기본 게임 루프 (5/10)
- UI 구현 (5/10)
- 점수 시스템 (4/10)

#### 난이도 낮은 부분
- Flame 엔진 설정 (3/10)
- 기본 입력 처리 (3/10)
- 메뉴 화면 (2/10)

## 🛠 개발 작업 목록

### 즉시 시작 가능한 작업
1. ✅ pubspec.yaml 업데이트 - Flame 패키지 추가
2. ✅ 프로젝트 디렉토리 구조 생성
3. ✅ 기본 게임 클래스 스캐폴딩

### 순차적 개발 작업
```
1. 환경 설정
   ├── Flame 엔진 통합
   ├── 디렉토리 구조 설정
   └── 에셋 폴더 준비

2. 기초 구현
   ├── StackGame 클래스
   ├── 게임 상태 관리
   └── 화면 전환 시스템

3. 핵심 메카닉
   ├── Block 컴포넌트
   ├── 이동/낙하 물리
   ├── 충돌 감지
   └── 트리밍 알고리즘

4. 게임 시스템
   ├── StackManager
   ├── 점수/콤보
   ├── 타이머
   └── 난이도 조절

5. UI/UX
   ├── HUD 오버레이
   ├── 메뉴 화면들
   └── 카메라 시스템

6. 폴리싱
   ├── 비주얼 효과
   ├── 사운드
   └── 웹 최적화
```

## 📈 리스크 및 대응 방안

### 주요 리스크
1. **트리밍 알고리즘 복잡도**
   - 대응: 단계별 구현, 충분한 테스트

2. **웹 성능 이슈**
   - 대응: 프로파일링, 점진적 최적화

3. **Flame 엔진 학습 곡선**
   - 대응: 공식 문서 참고, 예제 코드 활용

## 🚀 첫 주 개발 계획

### Day 1-2: 환경 설정
- Flame 패키지 설치
- 프로젝트 구조 설정
- 기본 게임 루프 구현

### Day 3-4: 블록 시스템
- Block 컴포넌트 구현
- 이동 및 낙하 메카닉

### Day 5-6: 충돌 시스템
- 충돌 감지 구현
- 트리밍 알고리즘 개발

### Day 7: 테스트 및 디버깅
- 핵심 메카닉 테스트
- 버그 수정

## 💡 개발 팁

1. **점진적 개발**: MVP 먼저 구현 후 기능 추가
2. **자주 테스트**: 웹 브라우저에서 지속적 테스트
3. **성능 모니터링**: 초기부터 성능 체크
4. **코드 모듈화**: 재사용 가능한 컴포넌트 설계

## 📝 참고사항

- Flutter 3.22+ 및 Dart 3.0+ 필요
- Chrome 브라우저 개발 권장
- 모바일 대응은 추후 고려
- 저장/네트워크 기능 제외 (스펙 준수)

---
*이 문서는 README.md 분석을 기반으로 작성되었으며, 실제 개발 진행에 따라 조정될 수 있습니다.*